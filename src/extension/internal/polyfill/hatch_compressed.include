//SPDX-License-Identifier: GPL-2.0-or-later
R"=====(
!function(){const t="http://www.w3.org/2000/svg",e=(t,e,r,n)=>{const u=(e-t)/2,s=r+u,i=t+u+n;let a=[];for(let t=r-(Math.round(s/n)+1)*n;t<i;t+=n)a.push(t);return a};class r{constructor(t,e){this.x=t,this.y=e}toString(){return`${this.x} ${this.y}`}isPoint(){return!0}clone(){return new r(this.x,this.y)}add(t){return new r(this.x+t.x,this.y+t.y)}distSquared(t){let e=this.x-t.x,r=this.y-t.y;return e*e+r*r}}document.querySelectorAll("rect,circle,ellipse,path,text").forEach((n,u)=>{let s=n.getAttribute("id");s||(s="hatch_shape_"+u,n.setAttribute("id",s));const i=(n.getAttribute("fill")||n.style.fill).match(/^url\(\s*"?\s*#([^\s"]+)"?\s*\)/);if(i&&i[1]){const u=document.getElementById(i[1]);if(u&&"hatch"===u.nodeName){const s=u.getAttributeNS("http://www.w3.org/1999/xlink","href");if(null!==s&&""!==s&&((t,e)=>{const r=["x","y","pitch","rotate","hatchUnits","hatchContentUnits","transform"],n=document.getElementById(e.slice(1));n&&"hatch"===n.nodeName&&(r.forEach(e=>{let r=n.getAttribute(e);null===t.getAttribute(e)&&null!==r&&t.setAttribute(e,r)}),0===t.children.length&&Array.from(n.children).forEach(e=>{t.appendChild(e.cloneNode(!0))}))})(u,s),0===u.children.length)return;const a=Number(u.getAttribute("x"))||0,h=Number(u.getAttribute("y"))||0,o=Number(u.getAttribute("pitch"))||0,c=Number(u.getAttribute("rotate"))||0,b=u.getAttribute("hatchUnits")||"objectBoundingBox",l=u.getAttribute("hatchContentUnits")||"userSpaceOnUse",m=u.getAttribute("transform")||u.getAttribute("hatchTransform")||"",p=(t=>{const e=[];return t.forEach(t=>e.push(t)),e.sort((t,e)=>Number(e.getAttribute("offset"))-Number(t.getAttribute("offset")))})(u.querySelectorAll("hatchpath,hatchPath"));if(o<=0)return void console.error("Non-positive pitch");const d=n.getBBox(),N=Math.ceil(Math.sqrt(d.width*d.width+d.height*d.height)),g=e(d.width,N,a,o),f=document.createElementNS(t,"pattern"),w=`${i[1]}_pattern`;let A=N-N%o,y=0;p.forEach(n=>{let u=Number(n.getAttribute("offset"))||0;u=u>o?u%o:u;const s=g.map(t=>t+u),i=document.createElementNS(t,"path");let a="";for(let t=0;t<n.attributes.length;++t){const e=n.attributes.item(t);"d"!==e.name&&i.setAttribute(e.name,e.value)}if(null===n.getAttribute("d"))a+=s.reduce((t,e)=>`${t}M ${e} ${h} V ${N} `,""),y=N;else{const u=n.getAttribute("d"),o=(t=>{let e=[],n=0,u=t.length,s=0;for(;n<u;)switch(t[n].toUpperCase()){case"Z":e.push(t[n]),n+=1,s=0;break;case"M":case"L":case"T":e.push(t[n],new r(Number(t[n+1]),Number(t[n+2]))),n+=3,s=1;break;case"H":e.push(t[n],new r(Number(t[n+1]),null)),n+=2,s=2;break;case"V":e.push(t[n],new r(null,Number(t[n+1]))),n+=2,s=3;break;case"C":e.push(t[n],new r(Number(t[n+1]),Number(t[n+2])),new r(Number(t[n+3]),Number(t[n+4])),new r(Number(t[n+5]),Number(t[n+6]))),n+=7,s=4;break;case"S":case"Q":e.push(t[n],new r(Number(t[n+1]),Number(t[n+2])),new r(Number(t[n+3]),Number(t[n+4]))),n+=5,s=5;break;case"A":e.push(t[n],t[n+1],t[n+2],t[n+3],t[n+4],t[n+5],new r(Number(t[n+6]),Number(t[n+7]))),n+=8,s=6;break;case"B":e.push(t[n],t[n+1]),n+=2,s=7;break;default:switch(s){case 1:e.push(new r(Number(t[n]),Number(t[n+1]))),n+=2;break;case 2:e.push(new r(Number(t[n]),null)),n+=1;break;case 3:e.push(new r(null,Number(t[n]))),n+=1;break;case 4:e.push(new r(Number(t[n]),Number(t[n+1])),new r(Number(t[n+2]),Number(t[n+3])),new r(Number(t[n+4]),Number(t[n+5]))),n+=6;break;case 5:e.push(new r(Number(t[n]),Number(t[n+1])),new r(Number(t[n+2]),Number(t[n+3]))),n+=4;break;case 6:e.push(t[n],t[n+1],t[n+2],t[n+3],t[n+4],new r(Number(t[n+5]),Number(t[n+6]))),n+=7;break;default:e.push(t[n]),n+=1}}return e})(u.match(/([+-]?(\d+(\.\d+)?))|[MmZzLlHhVvCcSsQqTtAaBb]/g)),c="M"===o[0],b=o[0].toLowerCase()===o[0],l=new r(0,0),m=(e=>{const r=document.createElementNS(t,"path");let n=e.getAttribute("d");return"M"!==n[0].toUpperCase()&&(n=`M 0,0 ${n}`),r.setAttribute("d",n),r.getPointAtLength(r.getTotalLength()).y-r.getPointAtLength(0).y})(n);if(m<=0)return void console.error("y offset is non-positive");y=N-N%m;const p=e(d.height,N,h,m);s.forEach(t=>{l.x=t,c||b||(a+=`M ${t} 0`),p.forEach(e=>{l.y=e,a+=b?`M ${t} ${e} ${u}`:o.map(t=>t.isPoint&&t.isPoint()?t.add(l):t).map(t=>t.isPoint&&t.isPoint()?t.toString():t).reduce((t,e)=>`${t} ${e}`,"")})}),i.style.fill="none"}i.setAttribute("d",a),f.appendChild(i)}),((t,e)=>{for(let r in e)t.setAttribute(r,e[r])})(f,{id:w,patternUnits:b,patternContentUnits:l,width:A,height:y,x:d.x,y:d.y,patternTransform:`rotate(${c} 0 0) ${m}`}),u.parentElement.insertBefore(f,u),n.style.fill=`url(#${w})`,n.setAttribute("fill",`url(#${w})`)}}})}();
)====="
